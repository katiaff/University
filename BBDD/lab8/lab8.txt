CREATE TABLE alumno(
dnia VARCHAR(100),
noma VARCHAR (100),
apella VARCHAR (200),
domicilioa VARCHAR (300),
f_nacimiento DATE,
f_ingreso DATE,
CONSTRAINT alumno_pk PRIMARY KEY (dnia)
);

CREATE TABLE profesor(
dnip VARCHAR(100),
nombrep VARCHAR(100),
apellidop VARCHAR(200),
domiciliop VARCHAR(300),
CONSTRAINT profesor_pk PRIMARY KEY (dnip)
);

CREATE TABLE carrera(
codcarr VARCHAR(100),
nombrec VARCHAR(100),
duracion DECIMAL,
CONSTRAINT carrera_pk PRIMARY KEY(codcarr)
);


CREATE TABLE asignatura(
codasig VARCHAR(100),
codcarr VARCHAR(100),
nomasig VARCHAR(100),
curso VARCHAR(100),
creditos DECIMAL,
tipo VARCHAR(100),
CONSTRAINT asignatura_pk PRIMARY KEY (codasig),
CONSTRAINT pertenece FOREIGN KEY (codcarr) REFERENCES carrera(codcarr)
);

CREATE TABLE imparte(
codasig VARCHAR(100),
dnip VARCHAR(100),
CONSTRAINT imparte_pk PRIMARY KEY (codasig, dnip),
CONSTRAINT imparte_asig_fk FOREIGN KEY (codasig) REFERENCES asignatura(codasig),
CONSTRAINT imparte_prof_fk FOREIGN KEY (dnip) REFERENCES profesor(dnip)
);

CREATE TABLE califica1(
codasig VARCHAR(100),
dnia VARCHAR(100),
dnip VARCHAR(100),
nota DECIMAL,
fecha_calificacion DATE,
CONSTRAINT califica1_pk PRIMARY KEY (codasig, dnia),
CONSTRAINT califica1_dnia_fk FOREIGN KEY(dnia) REFERENCES alumno(dnia),
CONSTRAINT califica1_codasig_fk FOREIGN KEY(codasig) REFERENCES asignatura(codasig),
CONSTRAINT califica1_dnip_fk FOREIGN KEY(dnip) REFERENCES profesor(dnip),
CONSTRAINT nota1_ck CHECK (nota between 0 and 10)
);

CREATE TABLE califica2(
dnia VARCHAR(100),
cal_imparte VARCHAR(100),
nota DECIMAL,
fecha_calificacion DATE,
CONSTRAINT califica2_pk PRIMARY KEY (dnia, cal_imparte),
CONSTRAINT califica2_dnia_fk FOREIGN KEY(dnia) REFERENCES alumno(dnia),
CONSTRAINT califica2_imparte_fk FOREIGN KEY(cal_imparte) REFERENCES imparte(imparte_pk)
--CONSTRAINT califica2_prof_fk FOREIGN KEY (dnip) REFERENCES profesor(dnip),
--CONSTRAINT nota2_ck CHECK (nota between 0 and 10)
);

DROP TABLE califica2;

